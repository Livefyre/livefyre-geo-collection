#!/usr/bin/env node

var geoUrl = require('../').url;
var doc = require('fs').readFileSync(__dirname+'/fetch.doc', 'utf8');
var argv = process.argv.slice(2);
var opts = argv.length ? require('docopt').docopt(doc, { help: false }) : { '-h': true };
var shouldHelp = opts['-h'] || opts['--help'];

if (shouldHelp) {
  console.log(doc);
  process.exit();
}

var opts = {
  collection: {
    network: 'labs.fyre.co',
    siteId: 315833,
    articleId: 'ben-geo-0'
  },
  x: 3,
  y: 7,
  z: 1
};

require('../').fetch(opts)
.then(function (res) {
  debugger;
  return res.json();
})
.then(function (json) {
  console.log('fetched', json);
  process.exit();
})
.then(null, function (err) {
  console.error(err);
  process.exit(1);
})

